{% extends 'amoo-jozve-foroosh/base.html' %}{% load semanticui %}{% load i18n %}

{% block body %}


    <div class="ui text container">
        <label for="province">{% trans 'Province' %}</label><br/>
        <select id="province" class="ui search dropdown">
            <option value="">---------</option>
            {% for province in options %}
                <option value="{{ province.id }}">{{ province.name }}</option>
            {% endfor %}
        </select>



        <h1 class="ui header">
            {% trans 'New advertise' %}
        </h1>



        <form class="ui form" role="form" method="post" action="{% url 'advertise:add_advertise' %}">
            {% csrf_token %}
            {{ form|semanticui_form }}
            <button type="submit" class="ui blue button">{% trans 'Add' %}</button>
        </form>
    </div>


    <script>
    $(document).ready(function() {
        $("#province").change(function () {
            var province_id = $(this).val();

            $.ajax({
                url: '/advertise/add/',
                dataType: "json",
                data: {
                    'province_id': province_id
                },

                success:function(data){
                    var county_field = $('#id_county');
                    county_field.empty();
                    county_field.append(new Option("---------", ""));
                    $.each(JSON.parse(data.counties),function(index,value) {
                            var o = new Option(value.name, value.id);
                            county_field.append(o);

                    });
                }

            });

        });
    });
    </script>
{% endblock %}